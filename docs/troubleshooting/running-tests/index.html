<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<link rel="search" type="application/opensearchdescription+xml" title="Detox" href="/Detox/opensearch.xml">
<script src="https://platform.twitter.com/widgets.js" async></script><title data-react-helmet="true">Dealing With Problems With Running Tests | Detox</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wix.github.io/Detox/docs/troubleshooting/running-tests"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Dealing With Problems With Running Tests | Detox"><meta data-react-helmet="true" name="description" content="Dealing With Problems With Running Tests"><meta data-react-helmet="true" property="og:description" content="Dealing With Problems With Running Tests"><link data-react-helmet="true" rel="shortcut icon" href="/Detox/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wix.github.io/Detox/docs/troubleshooting/running-tests"><link data-react-helmet="true" rel="alternate" href="https://wix.github.io/Detox/docs/troubleshooting/running-tests" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wix.github.io/Detox/docs/troubleshooting/running-tests" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/Detox/assets/css/styles.40bd1da7.css">
<link rel="preload" href="/Detox/assets/js/runtime~main.199b045a.js" as="script">
<link rel="preload" href="/Detox/assets/js/main.3160e360.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div class="banner_e+xV"><a href="https://stand-with-ukraine.pp.ua" target="_blank" rel="noopener noreferrer" class="link_9Wa8">ðŸ‡ºðŸ‡¦ This project is created with substantial contributions from our Ukrainian colleagues.<!-- --> <span class="hashtag_YjJi">#StandWithUkraine</span></a></div><div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Detox/"><div class="navbar__logo"><img src="/Detox/img/logo.png" alt="Detox Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/Detox/img/logo.png" alt="Detox Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Detox</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Detox/docs/introduction/getting-started">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wix/Detox" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div><div class="searchBox_Bc3W"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Troubleshooting</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/troubleshooting/troubleshooting">Troubleshooting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/troubleshooting/building-the-app">Dealing With Problems With Building the App &amp; Detox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Detox/docs/troubleshooting/running-tests">Dealing With Problems With Running Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/troubleshooting/synchronization">Dealing With Synchronization Issues in Tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Detox/docs/troubleshooting/flakiness">Dealing With Flakiness in Tests</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Detox/docs/contributing">Contributing</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Dealing With Problems With Running Tests</h1></header><h2 class="anchor anchorWithStickyNavbar_y2LR" id="dealing-with-problems-with-running-tests">Dealing With Problems With Running Tests<a aria-hidden="true" class="hash-link" href="#dealing-with-problems-with-running-tests" title="Direct link to heading">â€‹</a></h2><p>This page is about issues related to executing your Detox tests, typically triggered when running <code>detox test</code> (and not <code>detox build</code>, for example).</p><p>For troubleshooting of other issue, refer to our <a href="/Detox/docs/troubleshooting/troubleshooting">troubleshooting index</a>.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="table-of-contents">Table of Contents<a aria-hidden="true" class="hash-link" href="#table-of-contents" title="Direct link to heading">â€‹</a></h3><ul><li><a href="#trace-mode">Trace Mode</a></li><li><a href="#tests-execution-hangs">Tests execution hangs</a></li><li><a href="#no-simulators-found-ios">No Simulators Found (iOS)</a></li><li><a href="#syntax-error-unexpected-token">Syntax Error: Unexpected Token</a></li><li><a href="#cant-find-my-component-even-though-i-added-a-testid-to-its-props">Canâ€™t Find My Component Even Though I Added a <code>testID</code> to Its Props</a></li><li><a href="#test-tries-to-find-my-component-before-its-created">Test Tries to Find My Component Before Itâ€™s Created</a></li><li><a href="#cant-synchronize-the-test-with-my-app">Canâ€™t synchronize the test with my app</a></li><li><a href="#unknown-option-configuration-mochajs">Unknown option &quot;configuration&quot; (Mocha.js)</a></li><li><a href="#an-element-is-not-visible">An Element is Not Visible</a></li><li><a href="#debug-view-hierarchy">Debug View Hierarchy</a></li><li><a href="#compare-to-a-working-setup">Compare to a Working Setup</a></li><li><a href="#take-a-look-at-past-issues">Take a Look at Past Issues</a></li><li><a href="#how-to-open-a-new-issue">How to Open a New Issue</a></li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="trace-mode">Trace Mode<a aria-hidden="true" class="hash-link" href="#trace-mode" title="Direct link to heading">â€‹</a></h4><p>Itâ€™s a good idea to get as much information as possible about whatâ€™s going on. We can enable trace mode during tests by running our tests with:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI sh"><pre tabindex="0" class="prism-code language-sh codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">detox test --loglevel trace</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="enable-debugging-of-synchronization-issues">Enable debugging of synchronization issues<a aria-hidden="true" class="hash-link" href="#enable-debugging-of-synchronization-issues" title="Direct link to heading">â€‹</a></h4><p>See <a href="https://github.com/wix/detox/blob/master/docs/Troubleshooting.Synchronization.md#identifying-which-synchronization-mechanism-causes-us-to-wait-too-much" target="_blank" rel="noopener noreferrer">here</a>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="no-simulators-found-ios">No simulators found (iOS)<a aria-hidden="true" class="hash-link" href="#no-simulators-found-ios" title="Direct link to heading">â€‹</a></h4><p>In order to run tests on a simulator, you need to have simulator images installed on your machine. This process is performed by Xcode itself. You can list all available simulators using <code>simctl</code> by typing <code>xcrun simctl list</code> in terminal.</p><p>If youâ€™re missing a simulator, make sure Xcode is installed and use it to download the simulator. Take a look at the Preferences screen, some screenshots can be seen <a href="http://stackoverflow.com/questions/33738113/how-to-install-ios-9-1-simulator-in-xcode-version-7-1-1-7b1005" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Once the desired simulator is installed and returned by <code>xcrun simctl list</code>, double check its name in the list and make sure this name is found in the <code>detox</code> configuration entry in <code>package.json</code>. The reference for the configuration options is available <a href="/Detox/docs/api/configuration">here</a>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="tests-execution-hangs">Tests execution hangs<a aria-hidden="true" class="hash-link" href="#tests-execution-hangs" title="Direct link to heading">â€‹</a></h4><p><strong>Issue:</strong> A while after running Detox, you get a message about failure to connect to the running app, in the logs:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Detox canâ€™t seem to connect to the test app(s)!</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This can be a result of various reasons. It is generally up to you to debug and find the root cause. In any case, below are the common ones.</p><h5 class="anchor anchorWithStickyNavbar_y2LR" id="if-you-do-not-see-your-app-running-on-the-device">If you do not see your app running on the device<a aria-hidden="true" class="hash-link" href="#if-you-do-not-see-your-app-running-on-the-device" title="Direct link to heading">â€‹</a></h5><ul><li>You might have forgotten to run <code>device.launchApp()</code> in the beginning of your test.</li><li>The app might have crashed before Detox has had a chance to connect to it. To get the crash details, you can run Detox tests with <code>--record-logs all</code> CLI option and then inspect the device logs in the artifacts&#x27; folder.</li><li><strong>On Android</strong>, there might be a problem with the native test code in the <code>DetoxTest.java</code> file. Revisit the <a href="/Detox/docs/introduction/android#5-create-a-detox-test-class">associated section</a> in the setup guide.</li></ul><h5 class="anchor anchorWithStickyNavbar_y2LR" id="if-you-do-see-your-app-running-on-the-device">If you <em>do</em> see your app running on the device<a aria-hidden="true" class="hash-link" href="#if-you-do-see-your-app-running-on-the-device" title="Direct link to heading">â€‹</a></h5><ul><li><strong>On Android with SDKâ‰¥28</strong>, the appâ€™s connection to the Detox test server is blocked due to clear-traffic blockage (as reported in issue <a href="https://github.com/wix/Detox/issues/1450" target="_blank" rel="noopener noreferrer">#1450</a>).
The main step for getting this fixed is to revisit the <a href="/Detox/docs/introduction/android#6-enable-clear-text-unencrypted-traffic-for-detox">associated section</a> in the setup guide, which discusses network-security. Alternatively, the <code>android:usesCleartextTraffic=&quot;true&quot;</code> attribute can be configured in the <code>&lt;application&gt;</code> tag of the appâ€™s <code>AndroidManifest.xml</code>, but <strong>that is highly discouraged</strong>.</li><li>If youâ€™ve applied the above suggestion but the app fails to connect to the Detox test server, nonetheless: Refer to the deviceâ€™s logs, which should contain messages about failed connection attempts (get them using the <code>--record-logs all</code> argument)</li><li>The app could be running without Detox native code injected. In this case, first, make sure youâ€™re not trying to run in manual launch mode (where this behavior is valid). If so, examine the logs from the device (get them using the <code>--record-logs all</code> argument). If you see a crash related to Detoxâ€™s native code, you are welcome to report it on our GitHub tracker.</li><li>If you are in fact debugging your native code integration with Detox, these guides may prove helpful:<ul><li><a href="https://github.com/wix/Detox/blob/master/docs/Guide.DebuggingInAndroidStudio.md" target="_blank" rel="noopener noreferrer">https://github.com/wix/Detox/blob/master/docs/Guide.DebuggingInAndroidStudio.md</a></li><li><a href="https://github.com/wix/Detox/blob/master/docs/Guide.DebuggingInXcode.md" target="_blank" rel="noopener noreferrer">https://github.com/wix/Detox/blob/master/docs/Guide.DebuggingInXcode.md</a></li></ul></li></ul><h4 class="anchor anchorWithStickyNavbar_y2LR" id="syntax-error-unexpected-token">Syntax Error: Unexpected Token<a aria-hidden="true" class="hash-link" href="#syntax-error-unexpected-token" title="Direct link to heading">â€‹</a></h4><p><strong>Issue:</strong> Running tests immediately throws the following error:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">beforeEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                   </span><span class="token operator" style="color:#393A34">^</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token known-class-name class-name">SyntaxError</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token maybe-class-name">Unexpected</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">token</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">runInThisContext</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">76</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at </span><span class="token maybe-class-name">Module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">_compile</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">545</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">28</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at </span><span class="token function" style="color:#d73a49">loader</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Users</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">builduser</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">buildAgent</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">work</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">34eee2d16ef6c34b</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node_modules</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">babel</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">register</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">144</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    at </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">require</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">extensions</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">anonymous </span><span class="token keyword" style="color:#00009f">function</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword module" style="color:#00009f">as</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">/</span><span class="token maybe-class-name">Users</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">builduser</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">buildAgent</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">work</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">34eee2d16ef6c34b</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node_modules</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">babel</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">register</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">lib</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">154</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">child_process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">js</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">531</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Solution:</strong> This error means that your version of Node does not support <code>async-await</code> syntax. You should do the following:</p><ol><li>Update Node to a version <strong>8.3.0 or higher</strong>.</li></ol><h4 class="anchor anchorWithStickyNavbar_y2LR" id="cant-find-my-component-even-though-i-added-a-testid-to-its-props">Canâ€™t Find My Component Even Though I Added a <code>testID</code> to Its Props<a aria-hidden="true" class="hash-link" href="#cant-find-my-component-even-though-i-added-a-testid-to-its-props" title="Direct link to heading">â€‹</a></h4><p><strong>Issue:</strong> Detox fails to match a component even though it has a <code>testID</code>. Detox will throw the following error:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Error: Cannot find UI Element.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Exception with Assertion: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Assertion Criteria&quot; : &quot;assertWithMatcher: matcherForSufficientlyVisible(&gt;=0.750000)&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Element Matcher&quot; : &quot;(((respondsToSelector(accessibilityIdentifier) &amp;&amp; accessibilityID(&#x27;Welcome&#x27;)) &amp;&amp; !kindOfClass(&#x27;RCTScrollView&#x27;)) || (kindOfClass(&#x27;UIScrollView&#x27;) &amp;&amp; ((kindOfClass(&#x27;UIView&#x27;) || respondsToSelector(accessibilityContainer)) &amp;&amp; ancestorThatMatches(((respondsToSelector(accessibilityIdentifier) &amp;&amp; accessibilityID(&#x27;Welcome&#x27;)) &amp;&amp; kindOfClass(&#x27;RCTScrollView&#x27;))))))&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Recovery Suggestion&quot; : &quot;Check if element exists in the UI, modify assert criteria, or adjust the matcher&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Error Trace: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Description&quot; : &quot;Interaction cannot continue because the desired element was not found.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Domain&quot; : &quot;com.google.earlgrey.ElementInteractionErrorDomain&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Code&quot; : &quot;0&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;File Name&quot; : &quot;GREYElementInteraction.m&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Function Name&quot; : &quot;-[GREYElementInteraction matchedElementsWithTimeout:error:]&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;Line&quot; : &quot;119&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Solution:</strong> React Native only supports the <code>testID</code> prop on the native built-in components. If youâ€™ve created a custom composite component, you will have to support this prop yourself. You should probably propagate the <code>testID</code> prop to one of your rendered children (a built-in component):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">MyCompositeComponent</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TouchableOpacity</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">testID</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript keyword" style="color:#00009f">this</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">props</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript" style="color:#00009f">testID</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">View</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Text</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">Something something</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Text</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">View</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">TouchableOpacity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now, adding <code>testID</code> to your composite component should work:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">render</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">MyCompositeComponent</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">testID</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">MyUniqueId123</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="test-tries-to-find-my-component-before-its-created">Test Tries to Find My Component Before Itâ€™s Created<a aria-hidden="true" class="hash-link" href="#test-tries-to-find-my-component-before-its-created" title="Direct link to heading">â€‹</a></h4><p><strong>Issue:</strong> Due to a synchronization issue, the test tries to perform an expectation and fails because it runs the expectation too soon. Consider this example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">element</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">by</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Login&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">tap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">element</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">by</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Welcome&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBeVisible</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>In the test above, after tapping the Login button, the app performs several complex asynchronous operations until the Welcome message is displayed post-login. These can include querying a server, waiting for a response and then running an animated transition to the Welcome screen. Detox attempts to simplify your test code by synchronizing <em>automatically</em> with these asynchronous operations. What happens if for some reason the automatic synchronization doesnâ€™t work? As a result, Detox will not wait correctly until the Welcome screen appears and instead will continue immediately to the next line and try to run the expectation. Since the screen is not there yet, the test will fail.</p><p><strong>Solution:</strong> When you suspect that automatic synchronization didnâ€™t work, you have a fail-safe by synchronizing manually with <code>waitFor</code>. Using <code>waitFor</code> will poll until the expectation is met. This isnâ€™t a recommended approach so please use it as a workaround and open and issue to resolve the synchronization issue.</p><p>This is what the fixed test would look like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI js"><pre tabindex="0" class="prism-code language-js codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">element</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">by</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Login&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">tap</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">waitFor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">element</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">by</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">text</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Welcome&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">toBeVisible</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">withTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="cant-synchronize-the-test-with-my-app">Canâ€™t synchronize the test with my app<a aria-hidden="true" class="hash-link" href="#cant-synchronize-the-test-with-my-app" title="Direct link to heading">â€‹</a></h4><p>If you suspect that the test is failing because Detox fails to synchronize the test steps with your app, take a look at this in-depth <a href="/Detox/docs/troubleshooting/synchronization">synchronization troubleshooting tutorial</a>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="unknown-option-configuration-mochajs">Unknown option &quot;configuration&quot; (Mocha.js)<a aria-hidden="true" class="hash-link" href="#unknown-option-configuration-mochajs" title="Direct link to heading">â€‹</a></h4><p>In an attempt to run <code>detox test</code>, the following error is thrown:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">detox[4498] INFO:  [test.js] node_modules/.bin/mocha --opts e2e/mocha.opts --configuration ios.sim.release --grep :android: --invert</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  error: unknown option `--configuration&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p><strong>Solution:</strong> Upgrade to <code>detox@^12.4.0</code> or newer (latest, recommended), and <code>mocha@^6.1.3</code>.
That weird error has been spotted in older versions of <code>mocha</code> (including <code>v5.2.0</code>) and was fixed in <code>v6.0.0</code>. In fact, it conceals the genuine error:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Error: No test files found</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>If the error appeared after running a short command like <code>detox test</code>, please try out <code>detox test e2e/</code> (in other words, append the path to your end-to-end tests folder) - and if that fixes the error, then you deal the bug in the question and upgrading <code>detox</code> and <code>mocha</code> should help.</p><p>After you upgrade, you can configure the default path to your end-to-end tests folder in <code>package.json</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI diff"><pre tabindex="0" class="prism-code language-diff codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  &quot;detox&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">    &quot;specs&quot;: &quot;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">    &quot;specs&quot;: &quot;your-e2e-tests-folder&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Please mind that if your E2E tests are located at the default path (<code>e2e</code>), then you donâ€™t need to add <code>&quot;specs&quot;</code> property explicitly to <code>package.json</code>.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="an-element-is-not-visible">An Element is Not Visible<a aria-hidden="true" class="hash-link" href="#an-element-is-not-visible" title="Direct link to heading">â€‹</a></h4><p><strong>On iOS</strong>, you may run in a situation, when one of the interactions (tap, scroll, etc.) on an element fails with an error like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plain"><pre tabindex="0" class="prism-code language-plain codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">Test Failed: View &quot;&lt;RCTScrollView: 0x7f8d32296d70&gt;&quot; is not visible: view does not pass visibility threshold (0% visible of 75% required)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><ol><li><p>Try retrieving <code>ui.viewhierarchy</code> artifact â€” sometimes examining the hierarchy visually can give you insights.
Add a line <code>&quot;uiHierarchy&quot;: &quot;enabled&quot;</code> to your artifacts&#x27; configuration in <code>.detoxrc.js</code>, like in an example here: <a href="https://github.com/wix/Detox/blob/master/docs/APIRef.Configuration.md#artifacts-configuration" target="_blank" rel="noopener noreferrer">Artifacts Configuration</a>. After a rerun, you should find
a <code>ui.viewhierarchy</code> in a folder of your failing test. Please mind that you need Xcode 12 at least to open <code>*.viewhierarchy</code> files.</p></li><li><p>Besides, you can rerun your iOS app tests with <code>--take-screenshots failing</code>. What will happen is, for each view that fails visibility, two images will be saved at <code>artifacts/&lt;configuration-timestamp-dir&gt;/&lt;test name&gt;/DETOX_VISIBILITY_&lt;viewType&gt;__&lt;viewID&gt;__SCREEN.png</code> (and <code>.../DETOX_VISIBILITY_&lt;viewType&gt;__&lt;viewID&gt;__TEST.png</code> folder aside) with autogenerated names, e.g. <code>DETOX_VISIBILITY_RCTTextView__0x7fab7660f3e0__TEST.png</code>:</p></li></ol><table><thead><tr><th align="center">in <code>DETOX_*_SCREEN.png</code></th><th align="center">in <code>DETOX_*_TEST.png</code></th></tr></thead><tbody><tr><td align="center"><img alt="visible" src="https://user-images.githubusercontent.com/2270433/94178906-68872380-fea4-11ea-845c-c55c25b68c0e.png" height="480"></td><td align="center"><img alt="internals" src="https://user-images.githubusercontent.com/2270433/94178919-6c1aaa80-fea4-11ea-8db6-64f1f4b21361.png" height="480"></td></tr></tbody></table><p>The first is supposed to show what is seen on screen. The second shows the internal buffer that Detox tests for visibility; if the pixels arenâ€™t transparent enough and less than 75% of tested region is not transparent, the view is not considered visible.</p><p>If you are developing a React Native app, then the following applies. If, for instance, you see that tapping fails due to a view with <code>pointerEvents=&quot;none&quot;</code> obscuring your target â€” well, the only solutions are: either to make the obscurer a descendant of your target (instead of being a sibling), or to tap on the parent container.</p><p>If you see that your issue cannot be solved via testID replacement or a simple hierarchy rearrangement, then thereâ€™s a chance this is a bug in Detox. Make sure to provide your <code>ui.viewhierarchy</code> artifact, the generated <code>DETOX_VISIBILITY_*</code> pictures and a comprehensive description of the issue backed up with sound arguments.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="debug-view-hierarchy">Debug View Hierarchy<a aria-hidden="true" class="hash-link" href="#debug-view-hierarchy" title="Direct link to heading">â€‹</a></h4><p><strong>Issue:</strong> I added the <code>testID</code> prop, but I still canâ€™t find the view by id in my tests.</p><p><strong>Solution:</strong> You can investigate the appâ€™s native view hierarchy, this might shed some light on how the appâ€™s view hierarchy is laid out.</p><p>Do the following:</p><ol><li>Start a debuggable app (not a release build) in your simulator</li><li>Open Xcode</li><li>Attach Xcode to your appâ€™s process
<img alt="attach to process" src="/Detox/assets/images/attach-to-process-e47ced58650b9d7733142a3302fa2a35.jpg"></li><li>Press the <code>Debug View Hierarchy</code> button
<img alt="debug view hierarchy" src="/Detox/assets/images/debug-view-hierarchy-c086dcbfdc42ee69b1e1043bbe89271d.jpg"></li><li>This will open the hierarchy viewer, and will show a breakdown of your appâ€™s native view hierarchy. Here you can browse through the views</li><li>React Native testIDs are manifested as <em>accessibility identifiers</em> in the native view hierarchy</li></ol><p>Letâ€™s see an example. We will find the following view in the native hierarchy:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI jsx"><pre tabindex="0" class="prism-code language-jsx codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TouchableOpacity</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">onPress</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript keyword" style="color:#00009f">this</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript function" style="color:#d73a49">onButtonPress</span><span class="token tag script language-javascript punctuation" style="color:#393A34">.</span><span class="token tag script language-javascript function" style="color:#d73a49">bind</span><span class="token tag script language-javascript punctuation" style="color:#393A34">(</span><span class="token tag script language-javascript keyword" style="color:#00009f">this</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;ID Working&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">)</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">Text</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">testID</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag attr-value" style="color:#e3116c">UniqueId345</span><span class="token tag attr-value punctuation" style="color:#393A34">&#x27;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">color</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;blue&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript literal-property property" style="color:#36acaa">marginBottom</span><span class="token tag script language-javascript operator" style="color:#393A34">:</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript number" style="color:#36acaa">20</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text">ID</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">Text</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag class-name" style="color:#00009f">TouchableOpacity</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This is the hierarchy viewer, pointing to the native view just mentioned:</p><p><img alt="hierarchy viewer" src="/Detox/assets/images/hierarchy-viewer-0b1843b00b7eb3715f5ffa5ca4da0640.jpg"></p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="compare-to-a-working-setup">Compare to a Working Setup<a aria-hidden="true" class="hash-link" href="#compare-to-a-working-setup" title="Direct link to heading">â€‹</a></h4><p>If you feel lost, try starting from a working example for sanity.</p><p>There are multiple working examples included in this repo, such as <a href="https://github.com/wix/Detox/tree/master/examples/demo-react-native" target="_blank" rel="noopener noreferrer">demo-react-native</a>.</p><p>First, install, build and make sure the tests are indeed passing. If they are, try comparing this setup with what you have.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="take-a-look-at-past-issues">Take a Look at Past Issues<a aria-hidden="true" class="hash-link" href="#take-a-look-at-past-issues" title="Direct link to heading">â€‹</a></h4><p>Before opening a new issue, search the <a href="https://github.com/wix/detox/issues?utf8=%E2%9C%93%5C&amp;q=is%3Aissue" target="_blank" rel="noopener noreferrer">list of issues</a> on GitHub. Thereâ€™s a good chance somebody faced the same problem you are having.</p><h4 class="anchor anchorWithStickyNavbar_y2LR" id="how-to-open-a-new-issue">How to Open a New Issue<a aria-hidden="true" class="hash-link" href="#how-to-open-a-new-issue" title="Direct link to heading">â€‹</a></h4><p>Before opening a new issue, please follow the entire troubleshooting guide and go over past issues.</p><p>General usage questions should be opened on Stack Overflow, where the core Detox team is active and responds to questions:
<a href="https://stackoverflow.com/questions/tagged/detox" target="_blank" rel="noopener noreferrer">https://stackoverflow.com/questions/tagged/detox</a></p><p>If you believe you are seeing a Detox issue, select the correct template from the options, and make sure to fill all requested information in the template. Omitting important information will likely result in a closed issue.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/wix/Detox/edit/master/docs/../docs/Troubleshooting.RunningTests.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Detox/docs/troubleshooting/building-the-app"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Dealing With Problems With Building the App &amp; Detox</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Detox/docs/troubleshooting/synchronization"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Dealing With Synchronization Issues in Tests<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dealing-with-problems-with-running-tests" class="table-of-contents__link toc-highlight">Dealing With Problems With Running Tests</a><ul><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Detox/docs/introduction/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Detox/docs/contributing">Contributing to Detox</a></li></ul></div><div class="col footer__col"><div class="footer__title">Support</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/detox" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Ask a question on Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/wix/Detox/issues/new/choose" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Create new issue on Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/wix/Detox" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/detoxe2e/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/Detox/assets/js/runtime~main.199b045a.js"></script>
<script src="/Detox/assets/js/main.3160e360.js"></script>
</body>
</html>