<!-- markdownlint-configure-file { "no-trailing-punctuation": 0 } -->

import CodeBlock from '@theme/CodeBlock';

Open `.detoxrc.js` and replace `YOUR_APP` placeholder with the actual app name, e.g.:

<CodeBlock language="diff">
{props.appDiff('Debug').trimEnd()}
{props.appDiff('Release').replace(/^.*$/m, '').trimEnd()}
</CodeBlock>

Following device types could be used to control Android devices:

- `android.emulator`. Boot stock Android-SDK emulator (AVD) with provided `name`, for example `Pixel_API_28`.

- `android.attached`. Connect to already-attached android device. The device should be listed in the output of `adb devices` command under provided `name`.
  The `avdName` property accepts a regular expression pattern that allows to specify the pool of device candidates to which you wish to connect. Use this property to run tests in parallel on multiple attached devices.

- `android.genycloud`. TODO

For a complete, working example, refer to the [Detox example app](https://github.com/wix/Detox/tree/master/examples/demo-react-native/detox.config.js).

##### Using product flavors

If you are using custom [`productFlavors`](https://developer.android.com/studio/build/build-variants#product-flavors) the config needs to be applied a bit differently. This example shows how a `beta` product flavor would look for both debug and release build types:

```json
"detox" : {
  "devices": {
    "emulator": {
      "type": "android.emulator",
      "device": {
        "avdName": "Pixel_API_28"
      }
    }
  },
  "apps": {
    "android.beta.debug": {
      "type": "android.apk",
      "binaryPath": "android/app/build/outputs/apk/beta/debug/app-beta-debug.apk",
      "build": "cd android && ./gradlew assembleBetaDebug assembleBetaDebugAndroidTest -DtestBuildType=debug && cd .."
    },
    "android.beta.release": {
      "type": "android.apk",
      "binaryPath": "android/app/build/outputs/apk/beta/release/app-beta-release.apk",
      "build": "cd android && ./gradlew assembleBetaRelease assembleBetaReleaseAndroidTest -DtestBuildType=release && cd .."
    }
  },
  "configurations": {
    "android.emu.beta.debug": {
      "device": "emulator",
      "app": "android.beta.debug"
    },
    "android.emu.beta.release": {
      "device": "emulator",
      "app": "android.beta.release"
    }
  }
}
```

